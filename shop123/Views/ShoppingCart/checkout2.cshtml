@model IEnumerable<shop123.ViewModel.ShoppingCartViewModel>
@{
    ViewBag.Title = "checkout2";
}


@{ int TotalPrice = 0;
    //string sellerId = "";
    }
<div class="p-2">
    <form action="@Url.Action("checkout","ShoppingCart")" method="post">

    @{@*using (Html.BeginForm("checkout", "ShoppingCart", FormMethod.Post))
            {*@


    List<string> seller = new List<string>();
    //List<string> sellerIds = new List<string>();

    //用來判斷店家是否重複
    foreach (var item in Model)
    {


        int detailCount = item.Detail.Count();
        if (!seller.Contains(item.sellerId))
        {
            <div class=" ">
                <div>
                    <span>店家 @item.sellerId</span>
                </div>
            </div>
            //sellerIds.Add(item.sellerId);
            <hr />
            foreach (var inItem in item.Detail)
            {

                int inItemSub = inItem.orderDetailprice.Value * inItem.orderDetailnum.Value;
                TotalPrice += inItemSub;
                <div class="d-flex bd-highlight mb-3 border-bottom">
                    <div class="p-2 bd-highlight"><img src='@inItem.spuImg1' width='100' /></div>
                    <div class="p-2 bd-highlight">
                        @inItem.orderDetailspuname
                        <br />
                        規格:@inItem.orderDetailcolor @inItem.orderDetailsize
                        <br />
                        x @inItem.orderDetailnum
                    </div>
                    <div class="ml-auto p-2 bd-highlight ">@($"{inItemSub:c0}")</div>
                </div>

            }
            <div class="mb-5">
                <div class="row">

                    <div class="col-7">

                        <div class="row ">

                            <div class="col-6">
                                <span class="control-label ">收件人姓名</span>
                                <div class="">
                                    @*@Html.TextBox("receiverName", "")*@
                                    <input type="text" id="receiverName" name="receiverName" required="required" class="form-control" />
                                </div>
                            </div>
                            <div class="col-6">
                                <span class="control-label ">電話</span>
                                <div class="">
                                    @*@Html.TextBox("receiverPhone", "")*@
                                    <input type="text" id="receiverPhone" name="receiverPhone" required="required" class="form-control" />
                                </div>
                            </div>

                            <div class="col">
                                <span class="control-label ">收件人地址</span>
                                <div class="">
                                    @*@Html.TextBox("receiverAddress", "")*@
                                    <input type="text" id="receiverAddress" name="receiverAddress" required="required" class="form-control" />
                                </div>
                            </div>

                            @*<div class=" ">
                                    <input type="hidden" id="totalprice" name="totalprice" class="" value="@TotalPrice" )" />
                                </div>*@

                            <div class=" ">
                                @*@Html.Hidden("sellerId", item.sellerId)*@
                                <input type="hidden" id="sellerId" name="sellerId" class="" value="@item.sellerId" )" />
                            </div>


                        </div>

                    </div>
                    <div class="col-5">



                        <div class="col-6">
                            <span class="control-label ">留言</span>
                            <div class="">
                                <input class="form-control" type="text" placeholder="管理室代收 / 電話聯絡時間..." value="" style="width:350px">
                            </div>
                        </div>
                        <div class="col-6">
                            <span class="control-label ">付款方式</span>
                            <div class="">
                                <select class="form-control">
                                    <option value="">貨到付款</option>
                                </select>
                            </div>
                        </div>



                    </div>
                </div>
            </div>
            seller.Add(item.sellerId);
        }
    }
    <div class="form-group mt-5">
        <div class=" d-flex flex-row-reverse ">
            <input type="submit" value="下訂單" class="btn btn-dark " />

        </div>
    </div>
    }

    @*}*@
    </form>
</div>
