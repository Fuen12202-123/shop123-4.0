@model IEnumerable<shop123.ViewModel.OrderViewModel>


<div class="p-2">
    @{List<int> skuidlist = new List<int>();}
    @foreach (var item in Model)
    {
        int detailCount = item.Detail.Count();
        int TotalPrice = 0;

        <div class=" d-flex justify-content-between mb-2 mt-5">
            <div>
                店家名稱
                <button>聊聊</button>
                <button>查看賣場</button>
            </div>
            <div>
                <span>訂單編號 @item.orderguid</span>
                @*<span>是否評價</span>*@
            </div>

        </div>
        <hr />
        foreach (var inItem in item.Detail)
        {
            int inItemSub = inItem.orderDetailprice.Value * inItem.orderDetailnum.Value;
            TotalPrice += inItemSub;
            <div class="d-flex bd-highlight mb-3 border-bottom">
                <div class="p-2 bd-highlight"><img src='@inItem.spuImg1' width='100' /></div>
                <div class="p-2 bd-highlight">
                    @inItem.orderDetailspuname
                    <br />
                    規格:@inItem.orderDetailcolor @inItem.orderDetailsize
                    <br />
                    x @inItem.orderDetailnum
                </div>
                <div class="ml-auto p-2 bd-highlight ">
                    @($"{inItemSub:c0}")
                    @if (item.orderState == "完成")
                    {
                        <div style="margin-top:50px;">
                            @Html.ActionLink("我要評論", "ProdComment", "Order", new { skuID = inItem.skuId, mbName = @item.memberId, orderdetailID = inItem.id }, new { @class = "btn btn-outline-secondary" })
                        </div>
                    }
                </div>
            </div>

        }
        <div class="">
            <div class="d-flex flex-row-reverse mb-4 ">訂單金額：@($"{TotalPrice:c0}")</div>
            <div class="d-flex justify-content-end mb-5">
                <div>
                    @if (@item.orderState == "未付款")
                    {
                        <a class="btn">付款</a>
                        <a class="btn">取消訂單</a>
                        <button class="btn">聯絡賣家</button>
                        <button class="btn">查看評價</button>
                    }
                    else if (@item.orderState == "待出貨")
                    {
                        <a class="btn">取消訂單</a>
                        <button class="btn">聯絡賣家</button>
                        <button class="btn">查看評價</button>
                    }
                    else if (@item.orderState == "待收貨")
                    {
                        <a class="btn">完成訂單</a>
                        <button class="btn">聯絡賣家</button>
                        <button class="btn">查看評價</button>
                    }
                    else if (@item.orderState == "完成")
                    {
                        <a class="btn">再買一次</a>
                        <button class="btn">聯絡賣家</button>
                        <button class="btn">查看評價</button>
                    }
                    else if (@item.orderState == "不成立")
                    {
                        <a class="btn">再買一次</a>
                        <button class="btn">聯絡賣家</button>
                        <button class="btn">查看評價</button>
                    }

                </div>
            </div>
        </div>

    }



</div>